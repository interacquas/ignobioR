# load_working_functions.R
source("R/floratus.R")
source("R/park.R")
virtual_list_mod(data_flor=floratus, site=park, tau=20, cellsize=20000)
virtual_list_mod(data_flor=floratus, site=park, tau=20)
head(floratus)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
rm(list = c("ignorance_map_mod"))
devtools::load_all(".")
virtual_list_mod(data_flor=floratus, site=park, tau=20)
devtools::load_all(".")
devtools::load_all(".")
# Test 1: Permissive with exclusion
mrfi_test1 <- ignorance_map_mod(
data_flor = floratus[1:1000, ],
site = park,
excl_areas = unsuitablezone,
tau = 20,
cellsize = 2000
)
# Test 1: Permissive with exclusion
mrfi_test1 <- ignorance_map_mod(
data_flor = floratus,
site = park,
excl_areas = unsuitablezone,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
# Test 1: Permissive with exclusion
mrfi_test1 <- ignorance_map_mod(
data_flor = floratus,
site = park,
excl_areas = unsuitablezone,
tau = 20,
cellsize = 2000,
use_edge_buffer = FALSE
)
devtools::load_all(".")
# Test 1: Permissive with exclusion
mrfi_test1 <- ignorance_map_mod(
data_flor = floratus,
site = park,
excl_areas = unsuitablezone,
tau = 20,
cellsize = 2000,
use_edge_buffer = FALSE
)
install.packages("renv")
library(renv)
devtools::load_all(".")
# Test 1: Permissive with exclusion
mrfi_test1 <- ignorance_map_mod(
data_flor = floratus,
site = park,
excl_areas = unsuitablezone,
tau = 20,
cellsize = 2000,
)
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park_sf,
tau = 30,
upperlimit = 25
)
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 30,
upperlimit = 25
)
load("~/R projects/ignobioR/data/floratus.rda")
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 30,
upperlimit = 25
)
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 30,
upperlimit = 10
)
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10
)
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10,
use_parallel = FALSE # <--- Set this to FALSE
)
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10,
use_parallel = FALSE # <--- Set this to FALSE
)
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10
)
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10
)
# 1. Load the future package (if not already loaded)
library(future)
# 2. **FORCE SEQUENTIAL PROCESSING**
# This instruction is executed BEFORE the function call.
# It tells the 'future' package to use the simple, stable, single-core plan.
future::plan(future::sequential)
print("Future plan set to sequential. Running stably on a single core.")
# 3. Call the function (without use_parallel argument)
# It will use the sequential plan set above.
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10
)
devtools::load_all(".")
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10
)
devtools::load_all(".")
devtools::load_all(".")
vfl <- virtual_list_mod(
data_flor = floratus,
site = park,
tau = 20,
upperlimit = 10
)
library(terra)
ndvi_example <- rast("~/ndvi-msrm.tif")
usethis::use_data(ndvi_example, overwrite = TRUE)
ndvi_example
plot(ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
mrfi <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 2000
)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
crs(ndvi_example)
crs(mrfi)
crs(mrfi) <- crs(ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi$MRFI,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi$MRFI,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi$MRFI,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi$MRFI,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi$MRFI,  # â† still the old CRS!
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproh,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 1000
)
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
install.packages("spstat.explore")
install.packages("spatstat.explore")
library(spatstat.explore)
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
mrfi_reproj <- terra::project(mrfi$MRFI, ndvi_example)
sboost <- sampleboost_mod(
ndvi = ndvi_example,
ignorance = mrfi_reproj,
boundary = park,
nplot = 20,
areaplot = 400,
perm = 100
)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
install.packages("renv")
library(renv)
# Specify a CRAN snapshot date from 2022
renv::init(restart = TRUE, settings = list(snapshot.type = "all", cran.repos = "https://mran.microsoft.com/snapshot/2022-01-31"))
install.packages("renv")
library(renv)
# Specify a CRAN snapshot date from 2022
renv::init(restart = TRUE, settings = list(snapshot.type = "all", cran.repos = "https://mran.microsoft.com/snapshot/2022-01-31"))
library(renv)
renv::init(restart = TRUE, settings = list(snapshot.type = "all", cran.repos = "https://mran.microsoft.com/snapshot/2022-01-31"))
# Old (BROKEN): renv::init(restart = TRUE, settings = list(snapshot.type = "all", cran.repos = "https://mran.microsoft.com/snapshot/2022-01-31"))
# New (CORRECT): Use the Posit Public Package Manager (PPM) URL
# Note: R 4.1 is likely needed for spatial package compatibility with this date
renv::init(
restart = TRUE,
settings = list(
snapshot.type = "all",
cran.repos = "https://packagemanager.posit.co/cran/2022-01-31"
)
)
library(renv)
renv::init(
restart = TRUE,
settings = list(
snapshot.type = "all",
cran.repos = "https://packagemanager.posit.co/cran/2022-01-31"
)
)
# Option B: Try a later date (e.g., mid-2022)
renv::init(
restart = TRUE,
settings = list(
snapshot.type = "all",
cran.repos = "https://packagemanager.posit.co/cran/2022-06-01"
)
)
install.packages("remotes")
# 1. Install the 'checkpoint' package (if not already installed)
install.packages("checkpoint", repos = "https://cran.r-project.org")
# 2. Load the package
library(checkpoint)
# 3. Define the snapshot date
# This date is well within the R 4.1.2 window and before the major spatial package transitions.
snapshot_date <- "2021-12-01"
# 4. Use the checkpoint directory (ensure this path is accessible/writable)
checkpoint_dir <- file.path(getwd(), ".checkpoint_library_4.1.2")
# 5. Execute checkpoint() to set the local repository and library
# This step automatically creates an isolated library for the date specified.
# NOTE: This may take time as it downloads the archives and builds packages.
checkpoint(snapshot_date,
R_version = "4.1.2",
checkpointLocation = checkpoint_dir)
library(checkpoint)
snapshot_date <- "2021-12-01"
checkpoint_dir <- file.path(getwd(), ".checkpoint_library_4.1.2")
checkpoint(snapshot_date,
R_version = "4.1.2",
checkpointLocation = checkpoint_dir)
R.version.string
R.version.string
source("~/R projects/ignobioR-interacquas/R/ignorance_map.R", encoding = 'UTF-8', echo = TRUE)
mrfi <- ignorance_map(data_flor= floratus[sample(nrow(floratus), 1000), ],  site=park, tau= 80, cellsize= 5000)
data(floratus)
data(park)
mrfi <- ignorance_map(data_flor= floratus[sample(nrow(floratus), 1000), ],  site=park, tau= 80, cellsize= 5000)
# Add this line near the top, after loading all packages, or just before
# the first call to gdalUtils::gdal_rasterize
gdalUtils::gdal_setinstallation(search_path = "C:/Program Files/QGIS 3.34.5/bin")
# If the gdal installation cannot be found, run this command to see the available options
# gdalUtils::gdal_setinstallation()
gdalUtils::gdal_setinstallation(search_path = "C:\Program Files\QGIS 3.34.5\bin")
gdalUtils::gdal_setinstallation(search_path = "C:/Program Files/QGIS 3.34.5/bin")
# This command adds the GDAL directory to the system PATH for this R session.
# Use the correct path based on your QGIS installation.
Sys.setenv(PATH = paste("C:/Program Files/QGIS 3.34.5/bin", Sys.getenv("PATH"), sep = ";"))
# Now, re-run the check. The first time, it might still fail,
# but it should now be able to find GDAL on subsequent attempts.
gdalUtils::gdal_rasterize(...)
gdalUtils::gdal_rasterize(sprintf('%s/%s.shp', tempdir(), f),
f3 <- tempfile(fileext='.tif'), at=T,
tr=raster::res(x_crop_rich), te=c(sp::bbox(x_crop_rich)), burn=1,
init=0, a_nodata=0, ot='Byte')
source("~/R projects/ignobioR-interacquas/R/ignorance_map.R", encoding = 'UTF-8', echo = TRUE)
mrfi <- ignorance_map(data_flor= floratus[sample(nrow(floratus), 1000), ],  site=park, tau= 80, cellsize= 5000)
data(unsuitablezone)
mrfi <- ignorance_map(data_flor = floratus, excl_areas = unsuitablezone, site = park, tau = 20, cellsize = 5000)
mrfi <- ignorance_map(data_flor = floratus, excl_areas = unsuitablezone, site = park, tau = 20, cellsize = 1000)
mrfi <- ignorance_map(data_flor = floratus, excl_areas = unsuitablezone, site = park, tau = 20, cellsize = 2000)
source("~/R projects/ignobioR-interacquas/R/virtual_list.R", encoding = 'UTF-8', echo = TRUE)
vfl <- virtual_list(data_flor = floratus, site = park, excl_areas = unsuitablezone, tau = 20)
data(unsuitablezone)
data(floratus)
data(park)
mrfi_fast <- ignorance_map(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 2000,
use_coverage_weighting = FALSE
)
mrfi_fast <- ignorance_map(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 1000,
escl_areas = unsuitablezone,
use_coverage_weighting = FALSE
)
source("~/R projects/ignobioR-interacquas/R/ignorance_map.R", echo = TRUE)
source("~/R projects/ignobioR-interacquas/R/virtual_list.R", echo = TRUE)
mrfi_fast <- ignorance_map(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 1000,
escl_areas = unsuitablezone,
use_coverage_weighting = FALSE
)
mrfi_fast <- ignorance_map(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 1000,
excl_areas = unsuitablezone,
use_coverage_weighting = FALSE
)
vfl_test <- virtual_list(data_flor = floratus, site = park, excl_areas = unsuitablezone, tau = 20, upperlimit=10)
vignettes/ignobioR-vignette.Rmd
usethis::use_vignette("ignobioR-intro")
devtools::build_vignettes()
list.files("src/")
unlink("src", recursive = TRUE)
devtools::clean_dll()
devtools::document()
rm(list = c("ignorance_map", "virtual_list"))
devtools::clean_dll()
devtools::document()
devtools::build_vignettes()
devtools::check()
# This will show you where the non-ASCII characters are
tools::showNonASCIIfile("R/ignorance_map.R")
tools::showNonASCIIfile("R/ignorance_map.R")
devtools::check()
tools::showNonASCIIfile("R/ignorance_map.R")
devtools::check()
# Update pkgdown (optional but recommended)
install.packages("pkgdown")
# Update pkgdown (optional but recommended)
install.packages("pkgdown")
# Rebuild the entire site with your new vignette
pkgdown::build_site()
help(ignobioR)
?ignobioR
# Rebuild site to incorporate the new README
pkgdown::build_site()
# In R
dir.create("inst", showWarnings = FALSE)
pkgdown::build_site()
# 1. Check version consistency
cat("DESCRIPTION version:", as.character(packageVersion("ignobioR")), "\n")
cat("README mentions: Check manually for '2.0.0'\n")
cat("Vignette mentions: Check manually for '2.0.0'\n")
# 2. Check authors match
desc <- read.dcf("DESCRIPTION")
cat("\nAuthors in DESCRIPTION:\n")
cat(desc[,"Authors@R"], "\n")
# 3. Check citation
cat("\nCitation file:\n")
cat(readLines("inst/CITATION"), sep="\n")
# 4. Check package title/description consistency
cat("\nDESCRIPTION Title:", desc[,"Title"], "\n")
cat("DESCRIPTION Description:", desc[,"Description"], "\n")
devtools::install()
devtools::install()
devtools::install(upgrade = "never")
library(ignobioR)
packageVersion("ignobioR")  # Should show 2.0.0
pkgdown::build_site()
git add DESCRIPTION inst/CITATION docs/
