<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Map of Relative Floristic Ignorance — ignorance_map • ignobioR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Map of Relative Floristic Ignorance — ignorance_map"><meta property="og:description" content="Computes a Map of Relative Floristic Ignorance (MRFI) using
modern `sf` and `terra` packages for high performance. Aligned with MRFI
philosophy: shows all areas where data exists, letting IRFI values indicate
sampling quality rather than excluding poorly-sampled areas.
The function automatically generates both quantile and continuous visualizations,
providing comprehensive analysis in a standardized 4-page PDF output."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ignobioR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ignobioR-intro.html">ignobioR-intro</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map of Relative Floristic Ignorance</h1>

    <div class="hidden name"><code>ignorance_map.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes a Map of Relative Floristic Ignorance (MRFI) using
modern `sf` and `terra` packages for high performance. Aligned with MRFI
philosophy: shows all areas where data exists, letting IRFI values indicate
sampling quality rather than excluding poorly-sampled areas.</p>
<p>The function automatically generates both quantile and continuous visualizations,
providing comprehensive analysis in a standardized 4-page PDF output.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ignorance_map</span><span class="op">(</span></span>
<span>  <span class="va">data_flor</span>,</span>
<span>  <span class="va">site</span>,</span>
<span>  year_study <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  excl_areas <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  CRS.new <span class="op">=</span> <span class="fl">3035</span>,</span>
<span>  <span class="va">tau</span>,</span>
<span>  <span class="va">cellsize</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  check_overlap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"output"</span><span class="op">)</span>,</span>
<span>  output_prefix <span class="op">=</span> <span class="st">"MRFI"</span>,</span>
<span>  site_buffer <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  buffer_width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_method <span class="op">=</span> <span class="st">"touches"</span>,</span>
<span>  use_coverage_weighting <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data-flor">data_flor<a class="anchor" aria-label="anchor" href="#arg-data-flor"></a></dt>
<dd><p>A data.frame with 5 columns: 'Taxon' (species identity),
'Long' (longitude), 'Lat' (latitude), 'uncertainty' (spatial uncertainty
radius in meters), and 'year' (year of occurrence record).</p></dd>


<dt id="arg-site">site<a class="anchor" aria-label="anchor" href="#arg-site"></a></dt>
<dd><p>An `sf` object (or 'SpatialPolygonsDataFrame') representing the
study area. If no CRS is set, assumes EPSG:4326 (WGS84).</p></dd>


<dt id="arg-year-study">year_study<a class="anchor" aria-label="anchor" href="#arg-year-study"></a></dt>
<dd><p>Numeric year of analysis (e.g., 2025). Defaults to current
system year if not specified.</p></dd>


<dt id="arg-excl-areas">excl_areas<a class="anchor" aria-label="anchor" href="#arg-excl-areas"></a></dt>
<dd><p>Optional `sf` object (or 'SpatialPolygonsDataFrame') to
delimit unsuitable areas (e.g., marine surfaces for terrestrial flora) to be
excluded from calculations. If no CRS is set, assumes EPSG:4326.</p></dd>


<dt id="arg-crs-new">CRS.new<a class="anchor" aria-label="anchor" href="#arg-crs-new"></a></dt>
<dd><p>Numeric EPSG code for projected CRS used in calculations (must
be in meters). Default = 3035 (ETRS89-LAEA Europe).</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>Numeric. Percentual value of taxa loss over 100 years (0 &lt;= tau &lt; 100).
Represents the temporal decay of floristic records.</p></dd>


<dt id="arg-cellsize">cellsize<a class="anchor" aria-label="anchor" href="#arg-cellsize"></a></dt>
<dd><p>Numeric. Resolution of output raster in meters.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If TRUE (default), prints progress messages during execution.</p></dd>


<dt id="arg-check-overlap">check_overlap<a class="anchor" aria-label="anchor" href="#arg-check-overlap"></a></dt>
<dd><p>Logical. If TRUE (default), checks and plots spatial overlap
between occurrence points and study area.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>Character. Directory path for output files. Defaults to working directory.</p></dd>


<dt id="arg-output-prefix">output_prefix<a class="anchor" aria-label="anchor" href="#arg-output-prefix"></a></dt>
<dd><p>Character. Prefix for output filenames. Default = "MRFI".</p></dd>


<dt id="arg-site-buffer">site_buffer<a class="anchor" aria-label="anchor" href="#arg-site-buffer"></a></dt>
<dd><p>Logical. If TRUE, expands the study area boundary to analyze
a larger region beyond the original site. If FALSE (default), analyzes only the
original boundary. Note: Edge effects from external records are already handled
by the spatial uncertainty mechanism - points outside the site automatically
contribute to cells within the study area if their uncertainty buffers reach in.
This parameter is for expanding the analysis region itself, not for fixing edge
effects. Buffer width controlled by buffer_width parameter.</p></dd>


<dt id="arg-buffer-width">buffer_width<a class="anchor" aria-label="anchor" href="#arg-buffer-width"></a></dt>
<dd><p>Numeric. Width of buffer in meters when site_buffer=TRUE.
If NULL (default), uses cellsize as buffer distance. If specified, overrides
default. Must be &gt; 0. Buffer will NOT extend into exclusion areas.</p></dd>


<dt id="arg-mask-method">mask_method<a class="anchor" aria-label="anchor" href="#arg-mask-method"></a></dt>
<dd><p>Character. Method for final raster masking. One of:</p><ul><li><p>"touches" Include any cell intersecting site boundary (default, MRFI-aligned)</p></li>
<li><p>"none" Include entire raster extent, no masking (shows all data)</p></li>
</ul></dd>


<dt id="arg-use-coverage-weighting">use_coverage_weighting<a class="anchor" aria-label="anchor" href="#arg-use-coverage-weighting"></a></dt>
<dd><p>Logical. If TRUE (default), weights ignorance
contribution by fraction of cell covered by each buffer (matches original algorithm,
slower but more accurate). If FALSE, uses faster binary approach where any buffer
touch contributes full ignorance value (faster but may underestimate ignorance).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list with 4 objects:</p><ul><li><p>MRFI A `terra SpatRaster` of the Map of Relative Floristic Ignorance</p></li>
<li><p>RICH A `terra SpatRaster` of species richness computed without uncertainties</p></li>
<li><p>Uncertainties A data.frame of uncertainty and year values for all records
  used in computation</p></li>
<li><p>Statistics A data.frame summarizing settings and results</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>PDF Output Structure (4 pages, A4 landscape):</p><ul><li><p>Page 1 Quantile comparison (MRFI + Richness) - Primary analysis figure</p></li>
<li><p>Page 2 Continuous comparison (MRFI + Richness) - Raw data view</p></li>
<li><p>Page 3 Data diagnostics (temporal + spatial uncertainty histograms)</p></li>
<li><p>Page 4 Summary statistics table</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Load example data (requires 'ignobioR' package data)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">floratus</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">park</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">unsuitablezone</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Basic usage (recommended - edge effects already handled)</span></span></span>
<span class="r-in"><span><span class="va">mrfi</span> <span class="op">&lt;-</span> <span class="fu">ignorance_map</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_flor <span class="op">=</span> <span class="va">floratus</span>,</span></span>
<span class="r-in"><span>  site <span class="op">=</span> <span class="va">park</span>,</span></span>
<span class="r-in"><span>  excl_areas <span class="op">=</span> <span class="va">unsuitablezone</span>,</span></span>
<span class="r-in"><span>  tau <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  cellsize <span class="op">=</span> <span class="fl">2000</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: With buffer to EXPAND analysis area beyond original site</span></span></span>
<span class="r-in"><span><span class="co"># (defaults to cellsize width expansion)</span></span></span>
<span class="r-in"><span><span class="va">mrfi_buffered</span> <span class="op">&lt;-</span> <span class="fu">ignorance_map</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_flor <span class="op">=</span> <span class="va">floratus</span>,</span></span>
<span class="r-in"><span>  site <span class="op">=</span> <span class="va">park</span>,</span></span>
<span class="r-in"><span>  tau <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  cellsize <span class="op">=</span> <span class="fl">2000</span>,</span></span>
<span class="r-in"><span>  site_buffer <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Analyzes original site + 2000m buffer zone</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Custom buffer to analyze larger region (5km beyond site)</span></span></span>
<span class="r-in"><span><span class="va">mrfi_5km</span> <span class="op">&lt;-</span> <span class="fu">ignorance_map</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_flor <span class="op">=</span> <span class="va">floratus</span>,</span></span>
<span class="r-in"><span>  site <span class="op">=</span> <span class="va">park</span>,</span></span>
<span class="r-in"><span>  excl_areas <span class="op">=</span> <span class="va">unsuitablezone</span>,</span></span>
<span class="r-in"><span>  tau <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  cellsize <span class="op">=</span> <span class="fl">2000</span>,</span></span>
<span class="r-in"><span>  site_buffer <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  buffer_width <span class="op">=</span> <span class="fl">5000</span>  <span class="co"># Analyzes original site + 5km buffer zone</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Fast mode without coverage weighting</span></span></span>
<span class="r-in"><span><span class="va">mrfi_fast</span> <span class="op">&lt;-</span> <span class="fu">ignorance_map</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_flor <span class="op">=</span> <span class="va">floratus</span>,</span></span>
<span class="r-in"><span>  site <span class="op">=</span> <span class="va">park</span>,</span></span>
<span class="r-in"><span>  tau <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  cellsize <span class="op">=</span> <span class="fl">2000</span>,</span></span>
<span class="r-in"><span>  use_coverage_weighting <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View results</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mrfi</span><span class="op">$</span><span class="va">MRFI</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mrfi</span><span class="op">$</span><span class="va">RICH</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mrfi</span><span class="op">$</span><span class="va">Statistics</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marco D’Antraccoli.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

